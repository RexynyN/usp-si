<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento de Biblioteca</title>
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="container flex items-center justify-between py-16">
            <h1 class="navbar-brand">üìö BiblioSystem</h1>
            <div class="navbar-nav flex gap-16">
                <a href="#" onclick="showView('dashboard')" class="nav-link">Dashboard</a>
                <a href="#" onclick="showView('biblioteca')" class="nav-link">Gest√£o da Biblioteca</a>
                <a href="#" onclick="showView('emprestimos')" class="nav-link">Empr√©stimos</a>
            </div>
        </div>
    </nav>

    <main class="container py-16">
        <!-- Dashboard View -->
        <div id="dashboard-view" class="view active">
            <div class="view-header mb-32">
                <h1>Dashboard</h1>
                <p class="text-secondary">Vis√£o geral do sistema de biblioteca</p>
            </div>

            <div class="stats-grid">
                <div class="card">
                    <div class="card__body">
                        <h3>Usu√°rios Cadastrados</h3>
                        <div class="stat-number" id="total-usuarios">0</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card__body">
                        <h3>M√≠dias Dispon√≠veis</h3>
                        <div class="stat-number" id="total-midias">0</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card__body">
                        <h3>Empr√©stimos Ativos</h3>
                        <div class="stat-number" id="emprestimos-ativos">0</div>
                    </div>
                </div>
                <div class="card">
                    <div class="card__body">
                        <h3>Bibliotecas</h3>
                        <div class="stat-number" id="total-bibliotecas">0</div>
                    </div>
                </div>
            </div>

            <div class="dashboard-charts mt-32">
                <div class="card">
                    <div class="card__body">
                        <h3>Empr√©stimos por Tipo de M√≠dia</h3>
                        <div class="chart-container">
                            <canvas id="mediaTypeChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Biblioteca Management View -->
        <div id="biblioteca-view" class="view">
            <div class="view-header mb-32 flex justify-between items-center">
                <div>
                    <h1>Gest√£o da Biblioteca</h1>
                    <p class="text-secondary">Gerenciar usu√°rios, bibliotecas, m√≠dias e autores</p>
                </div>
                <div class="management-tabs flex gap-8">
                    <button class="btn btn--secondary tab-btn active" onclick="showManagementTab('usuarios')">Usu√°rios</button>
                    <button class="btn btn--secondary tab-btn" onclick="showManagementTab('bibliotecas')">Bibliotecas</button>
                    <button class="btn btn--secondary tab-btn" onclick="showManagementTab('midias')">M√≠dias</button>
                    <button class="btn btn--secondary tab-btn" onclick="showManagementTab('autores')">Autores</button>
                </div>
            </div>

            <!-- Usu√°rios Tab -->
            <div id="usuarios-tab" class="management-tab active">
                <div class="tab-header flex justify-between items-center mb-16">
                    <h2>Usu√°rios</h2>
                    <button class="btn btn--primary" onclick="showModal('usuario-modal')">Adicionar Usu√°rio</button>
                </div>
                <div class="table-container">
                    <table class="data-table" id="usuarios-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Telefone</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Bibliotecas Tab -->
            <div id="bibliotecas-tab" class="management-tab">
                <div class="tab-header flex justify-between items-center mb-16">
                    <h2>Bibliotecas</h2>
                    <button class="btn btn--primary" onclick="showModal('biblioteca-modal')">Adicionar Biblioteca</button>
                </div>
                <div class="table-container">
                    <table class="data-table" id="bibliotecas-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Endere√ßo</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- M√≠dias Tab -->
            <div id="midias-tab" class="management-tab">
                <div class="tab-header flex justify-between items-center mb-16">
                    <h2>M√≠dias</h2>
                    <button class="btn btn--primary" onclick="showModal('midia-modal')">Adicionar M√≠dia</button>
                </div>
                <div class="table-container">
                    <table class="data-table" id="midias-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Tipo</th>
                                <th>T√≠tulo</th>
                                <th>Condi√ß√£o</th>
                                <th>Biblioteca</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Autores Tab -->
            <div id="autores-tab" class="management-tab">
                <div class="tab-header flex justify-between items-center mb-16">
                    <h2>Autores</h2>
                    <button class="btn btn--primary" onclick="showModal('autor-modal')">Adicionar Autor</button>
                </div>
                <div class="table-container">
                    <table class="data-table" id="autores-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Data de Nascimento</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Empr√©stimos View -->
        <div id="emprestimos-view" class="view">
            <div class="view-header mb-32 flex justify-between items-center">
                <div>
                    <h1>Gerenciamento de Empr√©stimos</h1>
                    <p class="text-secondary">Realizar empr√©stimos, devolu√ß√µes e gerenciar penaliza√ß√µes</p>
                </div>
                <button class="btn btn--primary" onclick="showModal('emprestimo-modal')">Novo Empr√©stimo</button>
            </div>

            <div class="emprestimos-filter mb-16">
                <div class="flex gap-16">
                    <select class="form-control" id="emprestimo-filter" onchange="filterEmprestimos()">
                        <option value="todos">Todos os Empr√©stimos</option>
                        <option value="ativos">Empr√©stimos Ativos</option>
                        <option value="atrasados">Empr√©stimos Atrasados</option>
                        <option value="devolvidos">Empr√©stimos Devolvidos</option>
                    </select>
                </div>
            </div>

            <div class="table-container">
                <table class="data-table" id="emprestimos-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Usu√°rio</th>
                            <th>M√≠dia</th>
                            <th>Data Empr√©stimo</th>
                            <th>Data Prevista</th>
                            <th>Data Devolu√ß√£o</th>
                            <th>Status</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Usuario Modal -->
    <div id="usuario-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="usuario-modal-title">Adicionar Usu√°rio</h3>
                <button class="btn-close" onclick="closeModal('usuario-modal')">&times;</button>
            </div>
            <form id="usuario-form" onsubmit="saveUsuario(event)">
                <div class="modal-body">
                    <input type="hidden" id="usuario-id">
                    <div class="form-group">
                        <label class="form-label">Nome *</label>
                        <input type="text" class="form-control" id="usuario-nome" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="usuario-email">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Endere√ßo</label>
                        <input type="text" class="form-control" id="usuario-endereco">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="text" class="form-control" id="usuario-telefone">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" onclick="closeModal('usuario-modal')">Cancelar</button>
                    <button type="submit" class="btn btn--primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Biblioteca Modal -->
    <div id="biblioteca-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="biblioteca-modal-title">Adicionar Biblioteca</h3>
                <button class="btn-close" onclick="closeModal('biblioteca-modal')">&times;</button>
            </div>
            <form id="biblioteca-form" onsubmit="saveBiblioteca(event)">
                <div class="modal-body">
                    <input type="hidden" id="biblioteca-id">
                    <div class="form-group">
                        <label class="form-label">Nome *</label>
                        <input type="text" class="form-control" id="biblioteca-nome" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Endere√ßo</label>
                        <input type="text" class="form-control" id="biblioteca-endereco">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" onclick="closeModal('biblioteca-modal')">Cancelar</button>
                    <button type="submit" class="btn btn--primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- M√≠dia Modal -->
    <div id="midia-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="midia-modal-title">Adicionar M√≠dia</h3>
                <button class="btn-close" onclick="closeModal('midia-modal')">&times;</button>
            </div>
            <form id="midia-form" onsubmit="saveMidia(event)">
                <div class="modal-body">
                    <input type="hidden" id="midia-id">
                    <div class="form-group">
                        <label class="form-label">Tipo de M√≠dia *</label>
                        <select class="form-control" id="midia-tipo" required onchange="updateMidiaFields()">
                            <option value="">Selecione o tipo</option>
                            <option value="livro">Livro</option>
                            <option value="revista">Revista</option>
                            <option value="dvd">DVD</option>
                            <option value="artigo">Artigo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">T√≠tulo *</label>
                        <input type="text" class="form-control" id="midia-titulo" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Condi√ß√£o</label>
                        <select class="form-control" id="midia-condicao">
                            <option value="excelente">Excelente</option>
                            <option value="boa">Boa</option>
                            <option value="regular">Regular</option>
                            <option value="danificada">Danificada</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Biblioteca</label>
                        <select class="form-control" id="midia-biblioteca"></select>
                    </div>
                    
                    <!-- Dynamic fields based on media type -->
                    <div id="dynamic-fields"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" onclick="closeModal('midia-modal')">Cancelar</button>
                    <button type="submit" class="btn btn--primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Autor Modal -->
    <div id="autor-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="autor-modal-title">Adicionar Autor</h3>
                <button class="btn-close" onclick="closeModal('autor-modal')">&times;</button>
            </div>
            <form id="autor-form" onsubmit="saveAutor(event)">
                <div class="modal-body">
                    <input type="hidden" id="autor-id">
                    <div class="form-group">
                        <label class="form-label">Nome *</label>
                        <input type="text" class="form-control" id="autor-nome" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Nascimento</label>
                        <input type="date" class="form-control" id="autor-nascimento">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Falecimento</label>
                        <input type="date" class="form-control" id="autor-falecimento">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" onclick="closeModal('autor-modal')">Cancelar</button>
                    <button type="submit" class="btn btn--primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Empr√©stimo Modal -->
    <div id="emprestimo-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="emprestimo-modal-title">Novo Empr√©stimo</h3>
                <button class="btn-close" onclick="closeModal('emprestimo-modal')">&times;</button>
            </div>
            <form id="emprestimo-form" onsubmit="saveEmprestimo(event)">
                <div class="modal-body">
                    <input type="hidden" id="emprestimo-id">
                    <div class="form-group">
                        <label class="form-label">Usu√°rio *</label>
                        <select class="form-control" id="emprestimo-usuario" required></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">M√≠dia *</label>
                        <select class="form-control" id="emprestimo-midia" required></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data do Empr√©stimo *</label>
                        <input type="date" class="form-control" id="emprestimo-data" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Devolu√ß√£o Prevista *</label>
                        <input type="date" class="form-control" id="emprestimo-data-prevista" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--secondary" onclick="closeModal('emprestimo-modal')">Cancelar</button>
                    <button type="submit" class="btn btn--primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Alert Messages -->
    <div id="alert-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>